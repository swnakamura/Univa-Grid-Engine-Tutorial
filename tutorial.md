    この書類はベータ版です。誤り・改善点・書類をより充実させる内容を思いついた人はぜひともIssue/PRに投げてください。

*リモートで作業するのは非常に難しいので、わからないこと・うまくいかないことが出てくると思います。READMEにも書きましたが、そういうときは`#computing`チャンネルで遠慮せずに訊いてください。うだうだ悩んでも時間の無駄、聞くは所詮一時の恥です！*

# サーバーに入るまで
## 初心者の方へ

サーバーとのやり取りにはターミナル（黒い画面）を使うので、ある程度慣れておいてください。

* Q. ホームディレクトリ？パス？なにそれ？

    A. http://www.cc.kyoto-su.ac.jp/~hirai/text/path.html

* Q. 場所の移動とかコピーの方法がわからないよ！

    A.  http://www.ritsumei.ac.jp/~tomori/unix.html とかが参考になります。

* Q. ターミナルだとAtomとかVS CodeとかPyCharmが使えないじゃん！テキストエディタは何使えばいいの？

    A. **VIM一択**

まずはローカルで黒い画面をいじって慣れてから次に進みましょう

## サーバへのログイン
では、サーバーにログインしましょう。サーバには`ssh`を使ってログインします。

* `which ssh`と打って、`ssh not found`と表示された人は残念ながら`ssh`が入っていないのでインストールしましょう。

sshとは、通信内容を暗号化して離れたところにあるサーバとターミナルでやり取りできるコマンドです（仕組みはここでは解説しないので知りたい人は調べてください）。

さて、そのために必要な暗号鍵を作らなければなりません。あなたのパソコンには`~/.ssh/id_rsa.pub`と`~/.ssh/id_rsa`がありますか？ない場合は、`ssh-keygen`を実行して新しい暗号鍵を作成しましょう。いろいろ聞かれますがエンター連打でOKです。

* なお、すでに上のファイルがある場合は**絶対に作成してはいけません**。既存の鍵が上書きされてしまうと戻せないので。

サーバーの管理者権限を持つ人（現在は種石先生？）に相談して、`~/.ssh/id_rsa.pub`を教えましょう。

* **`.pub`のついていない方は絶対に他人に教えてはいけません**。他人に知られてしまったら鍵生成のところからやり直しましょう（ちなみに`.pub`のついている方はいくら教えても大丈夫なので安心してください。ネットに公開したって何の問題もありません）。

さて、そうすると`ssh`のあとに続けるオプション(IPアドレスとかポートとかユーザー名とか)を種石先生が教えてくださるので、それを使ってアクセスしましょう。お疲れ様でした！

# サーバー内の仕組み
こうして入ったサーバーですが、**ここで計算をしてはいけません**。ここから複数の計算用ノードにアクセスできるようになっているので、そこで計算をするようにしましょう。

ノードの管理には、Univa Grid Engineというプログラムが使われています。
* 参考: https://supcom.hgc.jp/japanese/utili_info/manual/uge.html

これは、ノードの計算資源を配分してくれたり、使いすぎている人は自動で制限してくれるプログラムです。このプログラムに「ジョブ（おしごと）」を依頼して、しばらく待つと（待たなくてもいいかもしれませんが）計算が実行されます。

依頼されたジョブは、キューと呼ばれる列に並びます。飲食店にできる行列と一緒ですね。自分の番が来るまでそこで待つことになるわけです。

## qstat

`qstat`は（たぶん）queue statisticsの略で、キューの状態を表示してくれます。

* `qstat`とすると、キューに並んだ自分のジョブの一覧が表示されます。
    * 何も予約していない状態だと何も表示されません。

* `qstat -f`とすると、全てのキューについて自分のジョブの一覧が表示されます。
    * 何も予約していない状態だと全てのキューが出ます。つまり**全ての計算機ノードが一覧になります**。

* `qstat -u <ユーザー名>`とすると、そのユーザーのジョブの一覧が表示されます。
    *  `qstat -u '*'`とすると、全てのユーザーのジョブの一覧が表示されます。

* なので、上2つを組み合わせて`qstat -u '*' -f`とすると、全てのユーザーのジョブがキューごとに表示されます。

* `qstat -j <ジョブID>`とすると、そのジョブの詳細な情報が表示されます。

その他にもさまざまなコマンドがあるので、`man qstat`で読んでみましょう。

### State of Jobs（ジョブの状態）
qstatで得られる情報の中でも、ジョブの状態(state)は役に立つ情報です。

* E(rror)
    * 問題によりジョブが開始できなかった。`qstat -j <job ID>`で詳しい原因が読めます。
* w(aiting)
    * ジョブが列で待っている
* t(ransfering)
    * ジョブの実行が開始されようとしている
* r(unning)
    * ジョブが実行されている

## qsub (WIP)
`qsub`は、シェルスクリプトの形でジョブを提出できるコマンドです。queue submissionの略でしょう。

## qlogin (WIP)
`qlogin`は、計算用ノードのシェルにログインできるコマンドです。シェルからログアウトすると終了します。
